{% extends "base_commerce.html" %}
{% load static %}
{% block page_header %}Analyse de la Rentabilité{% endblock %}

{% block content %}
<div class="info-cards">
    <div class="info-card">
        <div class="info-card-header">
            <div class="info-card-icon"><i class="fas fa-coins"></i></div>
            <div class="info-card-title">Revenus Totaux</div>
        </div>
        <div class="info-card-value" style="color: green;">{{ revenus_totaux }} €</div>
    </div>
    <div class="info-card">
        <div class="info-card-header">
            <div class="info-card-icon"><i class="fas fa-receipt"></i></div>
            <div class="info-card-title">Coûts Totaux</div>
        </div>
        <div class="info-card-value" style="color: red;">{{ couts_totaux }} €</div>
    </div>
    <div class="info-card">
        <div class="info-card-header">
            <div class="info-card-icon"><i class="fas fa-piggy-bank"></i></div>
            <div class="info-card-title">Bénéfice Net</div>
        </div>
        <div class="info-card-value" style="color: var(--text-primary);">{{ benefice_net }} €</div>
    </div>
</div>

<div class="elevage-card" style="margin-top: 2rem;">
    <h2>Répartition des flux financiers</h2>
    <div class="chart-container" style="max-width: 500px; margin: auto;">
        <canvas id="rentabiliteChart"></canvas>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    new Chart(document.getElementById('rentabiliteChart'), {
        type: 'doughnut',
        data: {
          labels: {{ chart_labels|safe }},
          datasets: [{
            label: 'Montant en €',
            data: {{ chart_values|safe }},
            backgroundColor: {{ chart_colors|safe }},
            hoverOffset: 4
          }]
        },
        options: { responsive: true, maintainAspectRatio: false }
    });
</script>
{% endblock %}