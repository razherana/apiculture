{% extends "base_commerce.html" %}
{% load static %}

{% block title %}Tableau de Bord | BeeNova{% endblock %}
{% block page_title %}Tableau de Bord{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'commerce/css/dashboard.css' %}">
{% endblock %}

{% block content %}
<!-- Hexagon Background -->
<div class="hexagon-bg" id="hexagonBackground"></div>

<!-- Statistics Overview -->
<div class="dashboard-overview">
    <div class="stat-card" style="animation-delay: 0.1s;">
        <div class="stat-icon"><i class="fas fa-jar"></i></div>
        <div class="stat-title">Production de Miel</div>
        <div class="stat-value">853<span style="font-size: 1.2rem;">kg</span></div>
        <div class="stat-change stat-change-up">
            <i class="fas fa-arrow-up"></i> +12.6% depuis le mois dernier
        </div>
    </div>
    
    <div class="stat-card" style="animation-delay: 0.2s;">
        <div class="stat-icon"><i class="fas fa-users"></i></div>
        <div class="stat-title">Clients Actifs</div>
        <div class="stat-value">247</div>
        <div class="stat-change stat-change-up">
            <i class="fas fa-arrow-up"></i> +5.3% depuis le mois dernier
        </div>
    </div>
    
    <div class="stat-card" style="animation-delay: 0.3s;">
        <div class="stat-icon"><i class="fas fa-euro-sign"></i></div>
        <div class="stat-title">Revenus</div>
        <div class="stat-value">32.5<span style="font-size: 1.2rem;">k€</span></div>
        <div class="stat-change stat-change-up">
            <i class="fas fa-arrow-up"></i> +8.2% depuis le mois dernier
        </div>
    </div>
    
    <div class="stat-card" style="animation-delay: 0.4s;">
        <div class="stat-icon"><i class="fas fa-boxes-stacked"></i></div>
        <div class="stat-title">Ruches Actives</div>
        <div class="stat-value">125</div>
        <div class="stat-change stat-change-down">
            <i class="fas fa-arrow-down"></i> -2.3% depuis le mois dernier
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
    <a href="#" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-plus"></i>
        </div>
        <div class="quick-action-text">
            <div class="quick-action-title">Nouvelle Vente</div>
            <div class="quick-action-description">Enregistrer une nouvelle transaction</div>
        </div>
    </a>
    
    <a href="#" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-user-plus"></i>
        </div>
        <div class="quick-action-text">
            <div class="quick-action-title">Ajouter un Client</div>
            <div class="quick-action-description">Créer un nouveau compte client</div>
        </div>
    </a>
    
    <a href="#" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-file-invoice"></i>
        </div>
        <div class="quick-action-text">
            <div class="quick-action-title">Générer Rapport</div>
            <div class="quick-action-description">Créer un rapport personnalisé</div>
        </div>
    </a>
    
    <a href="#" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-truck"></i>
        </div>
        <div class="quick-action-text">
            <div class="quick-action-title">Livraisons</div>
            <div class="quick-action-description">Gérer les expéditions en cours</div>
        </div>
    </a>
</div>

<div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1.5rem; margin-bottom: 2rem;">
    <!-- Recent Activity -->
    <div class="activity-timeline">
        <div class="activity-header">
            <h3 class="activity-title">Activité Récente</h3>
            <a href="#" class="link-animated">Voir tout</a>
        </div>
        
        <div class="activity-list">
            <div class="activity-item" style="animation-delay: 0.1s;">
                <div class="activity-item-header">
                    <h4 class="activity-item-title">Nouvelle commande #125</h4>
                    <span class="activity-item-time">Il y a 15 min</span>
                </div>
                <p class="activity-item-description">Marie Dupont a commandé 5kg de miel de lavande.</p>
            </div>
            
            <div class="activity-item" style="animation-delay: 0.2s;">
                <div class="activity-item-header">
                    <h4 class="activity-item-title">Stock bas</h4>
                    <span class="activity-item-time">Il y a 2h</span>
                </div>
                <p class="activity-item-description">Le stock de miel d'acacia est bas (5kg restants).</p>
            </div>
            
            <div class="activity-item" style="animation-delay: 0.3s;">
                <div class="activity-item-header">
                    <h4 class="activity-item-title">Nouvelle récolte</h4>
                    <span class="activity-item-time">Hier</span>
                </div>
                <p class="activity-item-description">28kg de miel de châtaignier ont été ajoutés à l'inventaire.</p>
            </div>
            
            <div class="activity-item" style="animation-delay: 0.4s;">
                <div class="activity-item-header">
                    <h4 class="activity-item-title">Paiement reçu</h4>
                    <span class="activity-item-time">Il y a 2 jours</span>
                </div>
                <p class="activity-item-description">Paiement de 450€ reçu pour la commande #119.</p>
            </div>
        </div>
    </div>
    
    <!-- Recent Orders -->
    <div class="recent-data">
        <div class="recent-data-header">
            <h3 class="recent-data-title">Commandes Récentes</h3>
            <div class="recent-data-actions">
                <a href="#" class="btn-glass btn-sm">Voir toutes les commandes</a>
            </div>
        </div>
        
        <table class="recent-data-table">
            <thead>
                <tr>
                    <th>Référence</th>
                    <th>Client</th>
                    <th>Date</th>
                    <th>Montant</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>#125</td>
                    <td>Marie Dupont</td>
                    <td>16/08/2023</td>
                    <td>165.00 €</td>
                    <td><span class="status-badge status-pending">En attente</span></td>
                </tr>
                <tr>
                    <td>#124</td>
                    <td>Jean Martin</td>
                    <td>15/08/2023</td>
                    <td>82.50 €</td>
                    <td><span class="status-badge status-completed">Livré</span></td>
                </tr>
                <tr>
                    <td>#123</td>
                    <td>Sophie Lambert</td>
                    <td>14/08/2023</td>
                    <td>248.75 €</td>
                    <td><span class="status-badge status-completed">Livré</span></td>
                </tr>
                <tr>
                    <td>#122</td>
                    <td>Paul Bernard</td>
                    <td>12/08/2023</td>
                    <td>37.20 €</td>
                    <td><span class="status-badge status-cancelled">Annulé</span></td>
                </tr>
                <tr>
                    <td>#121</td>
                    <td>Lucie Petit</td>
                    <td>10/08/2023</td>
                    <td>125.00 €</td>
                    <td><span class="status-badge status-completed">Livré</span></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Inventory Status -->
<div class="recent-data" style="margin-bottom: 2rem;">
    <div class="recent-data-header">
        <h3 class="recent-data-title">État des Stocks</h3>
        <div class="recent-data-actions">
            <a href="#" class="btn-glass btn-sm">Gérer l'inventaire</a>
        </div>
    </div>
    
    <table class="recent-data-table">
        <thead>
            <tr>
                <th>Produit</th>
                <th>Type</th>
                <th>Prix</th>
                <th>Stock</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Miel de Lavande</td>
                <td>Pot 500g</td>
                <td>12.50 €</td>
                <td>85 unités</td>
                <td><span class="status-badge status-completed">En stock</span></td>
            </tr>
            <tr>
                <td>Miel d'Acacia</td>
                <td>Pot 500g</td>
                <td>14.75 €</td>
                <td>5 unités</td>
                <td><span class="status-badge status-pending">Stock bas</span></td>
            </tr>
            <tr>
                <td>Miel de Châtaignier</td>
                <td>Pot 1kg</td>
                <td>19.90 €</td>
                <td>42 unités</td>
                <td><span class="status-badge status-completed">En stock</span></td>
            </tr>
            <tr>
                <td>Miel de Romarin</td>
                <td>Pot 250g</td>
                <td>8.50 €</td>
                <td>0 unités</td>
                <td><span class="status-badge status-cancelled">Rupture</span></td>
            </tr>
            <tr>
                <td>Miel Toutes Fleurs</td>
                <td>Pot 1kg</td>
                <td>16.90 €</td>
                <td>63 unités</td>
                <td><span class="status-badge status-completed">En stock</span></td>
            </tr>
        </tbody>
    </table>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animation pour les cartes de statistiques
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            card.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, 100 + (index * 100));
    });
    
    // Génération du fond hexagonal aléatoire
    const hexBg = document.getElementById('hexagonBackground');
    const hexCount = 15;
    
    for (let i = 0; i < hexCount; i++) {
        const hex = document.createElement('div');
        hex.classList.add('hexagon');
        
        // Position aléatoire
        const randomX = Math.random() * 100;
        const randomY = Math.random() * 100;
        
        // Taille aléatoire
        const randomSize = 80 + Math.random() * 120;
        
        // Rotation aléatoire
        const randomRotation = Math.random() * 60 - 30;
        
        // Animation aléatoire
        const randomDelay = Math.random() * 5;
        const randomDuration = 10 + Math.random() * 20;
        
        hex.style.left = `${randomX}%`;
        hex.style.top = `${randomY}%`;
        hex.style.width = `${randomSize}px`;
        hex.style.height = `${randomSize * 1.1547}px`;
        hex.style.transform = `rotate(${randomRotation}deg)`;
        hex.style.animationDelay = `${randomDelay}s`;
        hex.style.animationDuration = `${randomDuration}s`;
        
        hexBg.appendChild(hex);
    }
});
</script>
{% endblock %}
